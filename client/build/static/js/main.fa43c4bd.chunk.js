(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){},109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),o=a.n(i),s=(a(32),a(3)),c=a(5),l=a(6),u=a(9),p=a(7),m=a(10),d=a(13),g=a(8),h=a(19),f=a.n(h),b=a(11),E=a(25),v=a(17),O=function(){var e=Object(E.a)(f.a.mark(function e(t,a,n){var r,i,o,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=function(e){var t=e.match(/\d{1,}/g);return t[t.lenght-1]=t[t.length-1].lenght<3?t[t.length-1]="":t[t.length-1],t=Object(v.isObject)(t)?t.join(""):t,parseFloat(t)},o=a.stores.filter(function(e){return e.is_active}),n({type:"FETCHING_INFO",value:"Productos"}),e.next=6,fetch("/search?q=".concat(t),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(o)}).then(function(e){return e.text()}).then(function(e){return Object(b.a)(r).concat(Object(b.a)(JSON.parse(e)))});case 6:return r=e.sent,console.log(r),c=r.map(function(e){return void 0===e.price||""===e.price?Object(s.a)({},e,{price:0}):Object(s.a)({},e,{price:i(e.price)})}),n({type:"CLEAN"}),e.abrupt("return",c);case 11:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),j=a(4),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleFavButton",value:function(){var e=this,t=this.props.state.favoritos.length>0?r.a.createElement("span",{className:"contador-favoritos"},this.props.state.favoritos.length):"",a=r.a.createElement(j.Button,{onClick:function(){e.props.state.favoritos.length>0&&e.props.updateContent("favoritos")},className:"tags"},"Favoritos \ud83d\uded2 ",t),n=r.a.createElement(j.Button,{onClick:function(){return e.props.updateContent("productos")},className:"tags"},"Resultados \ud83d\udce6"," ",r.a.createElement("span",{className:"contador-resultados is-dark"},this.props.state.productos.length));switch(this.props.state.content){case"productos":return a;case"favoritos":return n;default:return a}}},{key:"render",value:function(){var e=this,t=""===this.props.state.fetching_info?"":"is-loading",a=""===this.props.state.content?"is-fullheight":"";return r.a.createElement(j.Hero,{bold:!0,className:a},r.a.createElement(j.Hero.Body,null,r.a.createElement(j.Container,null,r.a.createElement("div",{className:"brand"},r.a.createElement("img",{src:"img/logo2.png"}),r.a.createElement(j.Title,null,"Encuentralo.cl")),r.a.createElement(j.Field,{className:"field searchbar",hasAddons:!0},r.a.createElement("p",{className:"control has-icons-left searchbar-control"},r.a.createElement(j.Input,{placeholder:"Encuentra lo que buscas ya!",className:"input",medium:!0,onChange:function(t){return e.props.updateQuery(t.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.props.searchProducts(e.props.state)}}),r.a.createElement("span",{className:"icon is-small is-left"})),r.a.createElement(j.Control,null,r.a.createElement(j.Button,{success:!0,medium:!0,className:t,onClick:function(){return e.props.searchProducts(e.props.state)}},"Buscar"," "))),r.a.createElement("p",{className:"buttons center"},this.handleFavButton(),r.a.createElement(j.Button,{className:"tags"},"Opciones \u2699\ufe0f")))))}}]),t}(n.Component),_=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{updateContent:function(t){return e({type:"CHANGE_CONTENT",value:t})},updateQuery:function(t){return e({type:"UPDATE_QUERY",value:t})},searchProducts:function(t){return O(t.query,t.settings,e).then(function(t){return e({type:"UPDATE_PRODUCTOS",productos:t})})}}})(y),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://opensource.org/licenses/mit-license.php"},"Aviso Legal")," - Pol\xedtica de privacidad, cookies y propiedad intelectual - T\xe9rminos y condiciones Todos los derechos reservados 2018 ",r.a.createElement("a",{href:"https://idealizy.com"},"\xa9\ufe0fidealizy"))))}}]),t}(n.Component),N=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),C=(Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{updateQuery:function(t){return e({type:"UPDATE_QUERY",value:t})},searchProducts:function(t){return O(t.query,t.settings,e).then(function(t){return e({type:"UPDATE_PRODUCTOS",productos:t})})}}})(N),a(107),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=""!==this.props.state.fetching_info?r.a.createElement("span",{className:"flashing"},"Buscando ",r.a.createElement("strong",null,"(",this.props.state.fetching_info,")")):r.a.createElement("span",null,r.a.createElement("strong",null,"(",this.props.state.productos.length,")")," Resultados para"," ",r.a.createElement("strong",null,this.props.state.last_query));return r.a.createElement(j.Notification,{className:"level bold"},r.a.createElement("div",{className:"level-left"},r.a.createElement("span",{style:{marginRight:"0.5rem"}},"\ud83d\udd75"),t),r.a.createElement("div",{className:"level-right"},r.a.createElement("strong",{style:{marginRight:"0.5rem"}},"Ordenar por:"),r.a.createElement("div",{className:"select is-small",style:{marginRight:"0.5rem"}},r.a.createElement("select",{defaultValue:"tienda",onChange:function(t){return e.props.orderBy(t.target.value)}},r.a.createElement("option",{value:"precio <"},"\ud83e\udc27 Precio"),r.a.createElement("option",{value:"precio >"},"\ud83e\udc25 Precio"),r.a.createElement("option",{value:"tienda"},"Tienda"))),r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{defaultValue:"8",onChange:function(t){return e.props.itemsPerPage(parseInt(t.target.value))}},r.a.createElement("option",{value:"8"},"8"),r.a.createElement("option",{value:"12"},"12"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"32"},"32")))))}}]),t}(n.Component)),R=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{itemsPerPage:function(t){e({type:"ITEMS_PER_PAGE",value:t}),e({type:"HANDLE_PAGE",value:1})},orderBy:function(t){e({type:"ORDER_BY",value:t}),e({type:"HANDLE_PAGE",value:1})}}})(C),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).checkFavoritos=function(e,t){t.forEach(function(t){t.link===e&&a.setState({is_disabled:!0})})},a.state={is_disabled:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkFavoritos(this.props.link,this.props.state.favoritos)}},{key:"componentDidUpdate",value:function(e){e.link!=this.props.link&&this.checkFavoritos(this.props.link,this.props.state.favoritos)}},{key:"render",value:function(){var e=this;return r.a.createElement(j.Card,null,r.a.createElement(j.Card.Image,{src:this.props.image}),this.state.is_disabled?r.a.createElement(j.Button,{onClick:function(){e.setState({is_disabled:!1}),e.props.borrarFavorito(e.props.producto)},className:"like-delete delete is-large"}):r.a.createElement(j.Button,{onClick:function(){e.setState({is_disabled:!0}),e.props.agregarFavorito(Object(b.a)(e.props.state.favoritos).concat([e.props.producto]))},className:"like-button"},"\u2764\ufe0f"),r.a.createElement(j.Card.Content,null,r.a.createElement(j.Content,null,r.a.createElement(j.Title,{is:"5"},r.a.createElement("a",{href:this.props.link,target:"_blank"},r.a.createElement("strong",{className:"is-link"},this.props.title))),r.a.createElement("div",{className:"price-logo card-footer"},r.a.createElement("img",{src:this.props.logo,className:"store-logo"}),r.a.createElement("span",{className:"tag is-large"},r.a.createElement("strong",null,"$ "+this.props.price))))))}}]),t}(n.Component),A=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{agregarFavorito:function(t){return e({type:"AGREAGAR_FAVORITO",value:t})},borrarFavorito:function(t){return e({type:"BORRAR_FAVORITO",value:t})}}})(P),T=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handlePage",value:function(e){e<1||e>this.props.state.pagination.max_pages||e===this.props.state.pagination.current_page||this.props.changePage(e)}},{key:"render",value:function(){var e=this,t={},a={},n={},i={};1===this.props.state.pagination.current_page&&(t.disabled="disabled",i.disabled="disabled"),this.props.state.pagination.current_page===this.props.state.pagination.max_pages&&(a.disabled="disabled",n.disabled="disabled");var o=this.props.state.pagination.current_page+1<=this.props.state.pagination.max_pages?r.a.createElement("li",null,r.a.createElement("a",{className:"pagination-link"},this.props.state.pagination.current_page+1)):"",s=this.props.state.pagination.current_page-1>=1?r.a.createElement("li",null,r.a.createElement("a",{className:"pagination-link"},this.props.state.pagination.current_page-1)):"";return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(j.Field,{groupedCentered:!0},r.a.createElement("nav",{class:"pagination is-centered",role:"navigation","aria-label":"pagination"},r.a.createElement("a",Object.assign({class:"pagination-previous"},t,{onClick:function(){return e.handlePage(e.props.state.pagination.current_page-1)}}),"Anterior"),r.a.createElement("a",Object.assign({className:"pagination-next"},a,{onClick:function(){return e.handlePage(e.props.state.pagination.current_page+1)}}),"Siguiente"),r.a.createElement("ul",{class:"pagination-list"},r.a.createElement("li",null,r.a.createElement("a",Object.assign({},i,{className:"pagination-link",onClick:function(){return e.handlePage(1)}}),"1")),r.a.createElement("li",null,r.a.createElement("span",{class:"pagination-ellipsis"},"\u2026")),s,r.a.createElement("li",null,r.a.createElement("a",{className:"pagination-link is-current info-color","aria-label":"Page 46","aria-current":"page"},this.props.state.pagination.current_page)),o,r.a.createElement("span",{class:"pagination-ellipsis"},"\u2026"),r.a.createElement("li",null,r.a.createElement("a",Object.assign({className:"pagination-link"},n,{onClick:function(){return e.handlePage(e.props.state.pagination.max_pages)}}),this.props.state.pagination.max_pages))))),r.a.createElement("hr",null))}}]),t}(n.Component),w=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{changePage:function(t){return e({type:"HANDLE_PAGE",value:t})}}})(T),F=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=Object(b.a)(this.props.state.productos);switch(this.props.state.order_by){case"precio <":t.sort(function(e,t){return e.price-t.price});break;case"precio >":t.sort(function(e,t){return t.price-e.price});break;default:t=this.props.state.productos}var a=t.map(function(t,a){if(!(a+1>e.props.state.pagination.mostrar[1]||a<e.props.state.pagination.mostrar[0])){var n,i="/img/transparent.gif"===t.image||void 0===t.image||""===t.image?"http://lorempixel.com/512/512/cats/Imagen-No-Encontrada":t.image;return r.a.createElement(A,{key:a,producto:t,index:a,title:t.title,image:i,price:(n=t.price,n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),link:t.link,logo:t.store})}}),n=this.props.state.productos.length>1?r.a.createElement(R,null):"";return r.a.createElement(j.Container,{style:{padding:"0.5rem"}},n,r.a.createElement("div",{className:"content-wrapper"},a),r.a.createElement(w,null))}}]),t}(n.Component),B=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{}})(F),D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.state.favoritos.map(function(e,t){var a,n="/img/transparent.gif"===e.image||void 0===e.image?"http://noticiasnet.com.ar/latiendanet/oc-content/themes/osclasswizards/images/no_photo.gif":e.image;return r.a.createElement(A,{key:t,producto:e,index:t,title:e.title,image:n,price:(a=e.price,a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),link:e.link,logo:e.store})});return r.a.createElement(j.Container,null,r.a.createElement(j.Notification,null,r.a.createElement("strong",null,"Mis Favoritos")),r.a.createElement("div",{className:"content-wrapper"},e))}}]),t}(n.Component),x=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{}})(D),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={current_progress_name:"",progress:0,settings:{},data:{}},a.handleUpdate=a.handleUpdate.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;this.state.progress>100&&setTimeout(function(){return n.setState({progress:0,current_progress_name:""})},500)}},{key:"handleUpdate",value:function(e){this.state.settings!==e&&(""!==e.query&&this.state.settings.query!==e.query&&this.handleSearch(e.query),this.setState({settings:e}))}},{key:"handleContent",value:function(){switch(this.props.state.content){case"productos":return r.a.createElement(B,null);case"favoritos":return r.a.createElement(x,null)}}},{key:"render",value:function(){return r.a.createElement("div",{className:"App .container"},r.a.createElement(_,null),this.handleContent(),r.a.createElement(k,null))}}]),t}(n.Component),U=Object(g.b)(function(e){return{state:Object(s.a)({},e.dataReducer)}},function(e){return{}})(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(12),q={content:"",query:"test",last_query:"",fetching_info:"",settings:{stores:[{name:"yapo",is_active:!0},{name:"mercadolibre",is_active:!0},{name:"pcfactory",is_active:!0},{name:"spdigital",is_active:!1}]},order_by:"",pagination:{mostrar:[0,8],current_page:1,items_per_page:8,max_pages:10},productos:[],favoritos:[]},G=Object(I.c)({dataReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;if("CLEAN"===t.type)return Object(s.a)({},e,{productos:[],content:"productos",fetching_info:"",pagination:Object(s.a)({},e.pagination,{current_page:1,mostrar:[0,e.pagination.items_per_page]})});if("ORDER_BY"===t.type)return Object(s.a)({},e,{order_by:t.value});if("UPDATE_QUERY"===t.type)return Object(s.a)({},e,{query:t.value});if("ITEMS_PER_PAGE"===t.type)return Object(s.a)({},e,{pagination:Object(s.a)({},e.pagination,{items_per_page:t.value})});if("UPDATE_PRODUCTOS"===t.type){var a=Object(b.a)(t.productos);return Object(s.a)({},e,{last_query:e.query,productos:a,pagination:Object(s.a)({},e.pagination,{current_page:1,max_pages:Math.ceil(a.length/e.pagination.items_per_page)})})}if("AGREAGAR_FAVORITO"===t.type)return Object(s.a)({},e,{favoritos:Object(b.a)(t.value)});if("BORRAR_FAVORITO"===t.type){var n=e.favoritos.filter(function(e){return e.link!=t.value.link});return Object(s.a)({},e,{favoritos:n})}if("HANDLE_PAGE"===t.type){var r=e.pagination.items_per_page,i=1===t.value?[0,r]:[r*(t.value-1),r*(t.value-1)+r],o=Object(s.a)({},e.pagination,{current_page:t.value,mostrar:i,max_pages:Math.ceil(e.productos.length/e.pagination.items_per_page)});return Object(s.a)({},e,{pagination:o})}return"CHANGE_CONTENT"===t.type?Object(s.a)({},e,{content:t.value}):"FETCHING_INFO"===t.type?Object(s.a)({},e,{fetching_info:t.value}):Object(s.a)({},e)}}),H=a(26),L=Object(I.d)(G,Object(I.a)(H.logger));window.addEventListener("load",function e(){window.removeEventListener("load",e,!1),o.a.render(r.a.createElement(g.a,{store:L},r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},!1)},27:function(e,t,a){e.exports=a(109)},32:function(e,t,a){}},[[27,2,1]]]);
//# sourceMappingURL=main.fa43c4bd.chunk.js.map